// reconfigure menu items on mouse-over menu for this item
var donation_link_element = document.getElementById('stored_item_<%= @stored_item.id %>_donation_link');
donation_link_element.innerHTML = 'donate to charity';
donation_link_element.href = '/stored_items/<%=@stored_item.id%>/request_charitable_donation';

var container = document.getElementById("stored_item_<%=@stored_item.id%>_menu_list");

// re-add menu items
var mail_element = document.createElement('li');
mail_element.innerHTML = '<a href="#">mail to me</a>';
mail_element.id = 'stored_item_<%=@stored_item.id%>_mail_li';
container.insertBefore(mail_element, container.childNodes[2]);

var sell_element = document.createElement('li');
sell_element.innerHTML = '<a href="#">sell</a>';
sell_element.id = 'stored_item_<%=@stored_item.id%>_sell_li';
container.insertBefore(sell_element, container.childNodes[3]);

var dispose_element = document.createElement('li');
dispose_element.innerHTML = '<a href="#">safely dispose</a>';
dispose_element.id = 'stored_item_<%=@stored_item.id%>_dispose_li';
container.insertBefore(dispose_element, container.lastChild.nextSibling);

// remove unnecessary checkout element and div indicator
var checkout_element = document.getElementById("stored_item_<%=@stored_item.id%>_checkout_li")
container.removeChild(checkout_element)

var blocking_div = document.getElementById('item-<%=@stored_item.id%>-service-div')
var wider_container = document.getElementById("stored_item_<%=@stored_item.id%>_menu");
wider_container.removeChild(blocking_div)

// refresh the cart image at the top of the screen
var cart_display = document.getElementById("cart-display");
<% if !current_user.cart.nil? && !current_user.cart.empty? %>
	cart_display.innerHTML = '<p><a href="/account/cart">service requests in cart: <%= current_user.cart.num_items %></a></p>';
	cart_display.style.display = 'block';
<% else %>
	cart_display.innerHTML = '';
	cart_display.style.display = 'none';
<% end %>

